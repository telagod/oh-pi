# ğŸœ Ant Colony â€” èšç¾¤å¤šAgentååŒæ‰©å±•

> çœŸå®èšç¾¤ç”Ÿæ€æ˜ å°„çš„è‡ªç»„ç»‡å¤šAgentç³»ç»Ÿã€‚è‡ªé€‚åº”å¹¶å‘ï¼Œä¿¡æ¯ç´ é€šä¿¡ï¼Œé›¶ä¸­å¿ƒåŒ–è°ƒåº¦ã€‚

## æ¶æ„

```
èšå (Queen)                    ä¸» pi è¿›ç¨‹ï¼Œæ¥æ”¶ç›®æ ‡ï¼Œè°ƒåº¦ç”Ÿå‘½å‘¨æœŸ
  â”‚
  â”œâ”€ ğŸ” ä¾¦å¯Ÿèš (Scout)          è½»é‡ haikuï¼Œæ¢è·¯ï¼Œæ ‡è®°é£Ÿç‰©
  â”œâ”€ âš’ï¸  å·¥èš (Worker)           sonnetï¼Œæ‰§è¡Œä»»åŠ¡ï¼Œå¯äº§ç”Ÿå­ä»»åŠ¡
  â””â”€ ğŸ›¡ï¸ å…µèš (Soldier)          sonnetï¼Œå®¡æŸ¥è´¨é‡ï¼Œå¯è¦æ±‚è¿”å·¥
  
ä¿¡æ¯ç´  (Pheromone)              .ant-colony/ æ–‡ä»¶ç³»ç»Ÿï¼Œèš‚èšé—´é—´æ¥é€šä¿¡
å·¢ç©´ (Nest)                    å…±äº«çŠ¶æ€ï¼ŒåŸå­æ–‡ä»¶æ“ä½œï¼Œè·¨è¿›ç¨‹å®‰å…¨
```

## ç”Ÿå‘½å‘¨æœŸ

```
ç›®æ ‡ â†’ ä¾¦å¯Ÿ â†’ ä»»åŠ¡æ±  â†’ å·¥èšå¹¶è¡Œæ‰§è¡Œ â†’ å…µèšå®¡æŸ¥ â†’ ä¿®å¤(å¦‚éœ€) â†’ å®Œæˆ
         â”‚                    â”‚
         â”‚  ä¿¡æ¯ç´ æŒ¥å‘(10minåŠè¡°æœŸ)  â”‚  å­ä»»åŠ¡è‡ªåŠ¨äº§ç”Ÿ
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## è‡ªé€‚åº”å¹¶å‘

æ¨¡æ‹ŸçœŸå®èšç¾¤çš„åŠ¨æ€æ‹›å‹Ÿæœºåˆ¶ï¼š

- **å†·å¯åŠ¨**ï¼š1-2 åªèš‚èšï¼Œé€æ­¥æ¢ç´¢
- **æ¢ç´¢æœŸ**ï¼šæ¯æ¬¡ +1ï¼Œç›‘æµ‹ååé‡æ‹ç‚¹
- **ç¨³æ€æœŸ**ï¼šå›´ç»•æœ€ä¼˜å€¼å¾®è°ƒ
- **è¿‡è½½ä¿æŠ¤**ï¼šCPU > 85% æˆ–å†…å­˜ < 500MB è‡ªåŠ¨å‡å°‘
- **å¼¹æ€§ä¼¸ç¼©**ï¼šä»»åŠ¡å¤šâ†’æ‹›å‹Ÿï¼Œä»»åŠ¡å°‘â†’æ”¶ç¼©

## ä½¿ç”¨æ–¹å¼

### å‘½ä»¤

```
/colony <ç›®æ ‡æè¿°>          å¯åŠ¨èšç¾¤
/colony-stop                ä¸­æ­¢è¿è¡Œä¸­çš„èšç¾¤
Ctrl+Shift+A                å±•å¼€èšç¾¤è¯¦æƒ…é¢æ¿
```

### ç¤ºä¾‹

```
/colony å°†æ•´ä¸ªé¡¹ç›®ä» CommonJS è¿ç§»åˆ° ESMï¼Œæ›´æ–°æ‰€æœ‰ import/export å’Œ tsconfig

/colony ä¸º src/ ä¸‹æ‰€æœ‰æ¨¡å—æ·»åŠ å•å…ƒæµ‹è¯•ï¼Œè¦†ç›–ç‡ç›®æ ‡ 80%

/colony é‡æ„è®¤è¯ç³»ç»Ÿï¼Œä» session-based è¿ç§»åˆ° JWTï¼Œä¿æŒ API å…¼å®¹
```

## ä¿¡æ¯ç´ ç³»ç»Ÿ

èš‚èšé€šè¿‡ä¿¡æ¯ç´ é—´æ¥é€šä¿¡ï¼ˆstigmergyï¼‰ï¼Œä¸ç›´æ¥å¯¹è¯ï¼š

| ç±»å‹ | é‡Šæ”¾è€… | å«ä¹‰ |
|------|--------|------|
| discovery | ä¾¦å¯Ÿèš | å‘ç°çš„ä»£ç ç»“æ„ã€ä¾èµ–å…³ç³» |
| progress | å·¥èš | å®Œæˆçš„å˜æ›´ã€æ–‡ä»¶ä¿®æ”¹ |
| warning | å…µèš | è´¨é‡é—®é¢˜ã€å†²çªé£é™© |
| completion | å·¥èš | ä»»åŠ¡å®Œæˆæ ‡è®° |
| dependency | ä»»æ„ | æ–‡ä»¶é—´ä¾èµ–å…³ç³» |

ä¿¡æ¯ç´ æŒ‰æŒ‡æ•°è¡°å‡ï¼ˆåŠè¡°æœŸ 10 åˆ†é’Ÿï¼‰ï¼Œé¿å…è¿‡æ—¶ä¿¡æ¯è¯¯å¯¼åç»­èš‚èšã€‚

## æ–‡ä»¶é”å®š

æ¯ä¸ªä»»åŠ¡å£°æ˜æ“ä½œçš„æ–‡ä»¶åˆ—è¡¨ã€‚å¥³ç‹ä¿è¯ï¼š
- åŒä¸€æ–‡ä»¶åŒä¸€æ—¶åˆ»åªæœ‰ä¸€åªèš‚èšåœ¨ä¿®æ”¹
- æ–‡ä»¶å†²çªçš„ä»»åŠ¡è‡ªåŠ¨æ ‡è®° `blocked`ï¼Œç­‰é”é‡Šæ”¾åæ¢å¤

## å·¢ç©´ç»“æ„

```
.ant-colony/{colony-id}/
â”œâ”€â”€ state.json           èšå·¢ä¸»çŠ¶æ€
â”œâ”€â”€ pheromone.jsonl      ä¿¡æ¯ç´ è¿½åŠ æ—¥å¿—
â””â”€â”€ tasks/               æ¯ä¸ªä»»åŠ¡ä¸€ä¸ªæ–‡ä»¶ï¼ˆåŸå­æ›´æ–°ï¼‰
    â”œâ”€â”€ t-xxx.json
    â””â”€â”€ t-yyy.json
```

## å®‰è£…

```bash
# æ–¹å¼1ï¼šç¬¦å·é“¾æ¥åˆ° pi æ‰©å±•ç›®å½•
mkdir -p ~/.pi/agent/extensions/ant-colony
ln -sf "$(pwd)/pi-package/extensions/ant-colony/index.ts" ~/.pi/agent/extensions/ant-colony/index.ts
ln -sf "$(pwd)/pi-package/extensions/ant-colony/types.ts" ~/.pi/agent/extensions/ant-colony/types.ts
ln -sf "$(pwd)/pi-package/extensions/ant-colony/nest.ts" ~/.pi/agent/extensions/ant-colony/nest.ts
ln -sf "$(pwd)/pi-package/extensions/ant-colony/spawner.ts" ~/.pi/agent/extensions/ant-colony/spawner.ts
ln -sf "$(pwd)/pi-package/extensions/ant-colony/queen.ts" ~/.pi/agent/extensions/ant-colony/queen.ts
ln -sf "$(pwd)/pi-package/extensions/ant-colony/concurrency.ts" ~/.pi/agent/extensions/ant-colony/concurrency.ts

# æ–¹å¼2ï¼šé€šè¿‡ oh-pi å®‰è£…ï¼ˆå¾…é›†æˆï¼‰
npx oh-pi  # é€‰æ‹© Full Power é¢„è®¾
```

## æ¨¡å—è¯´æ˜

| æ–‡ä»¶ | è¡Œæ•° | èŒè´£ |
|------|------|------|
| `types.ts` | 117 | ç±»å‹ç³»ç»Ÿï¼šèš‚èšã€ä»»åŠ¡ã€ä¿¡æ¯ç´ ã€å·¢ç©´çŠ¶æ€ |
| `nest.ts` | 196 | å·¢ç©´ï¼šæ–‡ä»¶ç³»ç»Ÿå…±äº«çŠ¶æ€ï¼ŒåŸå­è¯»å†™ï¼Œä¿¡æ¯ç´ æŒ¥å‘ |
| `concurrency.ts` | 115 | è‡ªé€‚åº”å¹¶å‘ï¼šç³»ç»Ÿé‡‡æ ·ï¼Œæ¢ç´¢/ç¨³æ€åŒé˜¶æ®µè°ƒèŠ‚ |
| `spawner.ts` | 316 | èš‚èšå­µåŒ–ï¼šè¿›ç¨‹ç®¡ç†ï¼Œprompt æ„å»ºï¼Œè¾“å‡ºè§£æ |
| `queen.ts` | 331 | å¥³ç‹è°ƒåº¦ï¼šç”Ÿå‘½å‘¨æœŸï¼Œä»»åŠ¡æ³¢æ¬¡ï¼Œå¤šè½®è¿­ä»£ |
| `index.ts` | 324 | æ‰©å±•å…¥å£ï¼šcommand/shortcut æ³¨å†Œï¼ŒTUI æ¸²æŸ“ |
